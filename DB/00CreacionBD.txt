CREATE TABLE COMPANIAS(
		IDCOMPANIA 	SERIAL		PRIMARY KEY	,
    NOMBRE		VARCHAR(50)	NOT NULL	UNIQUE,
    LOGICDELETE		BOOL	DEFAULT FALSE		NOT NULL
);

CREATE TABLE SUCURSALESXCOMPANIAS(
		IDCOMPANIA		INT,
  	IDSUCURSAL		INT,
    LOGICDELETE		BOOL	DEFAULT FALSE		NOT NULL,
  	PRIMARY KEY (IDCOMPANIA,IDSUCURSAL)
);

CREATE TABLE SUCURSALES(
		IDSUCURSAL 	SERIAL		PRIMARY KEY	,
		ADMINISTRADOR	INT	NOT NULL,
    NOMBRE			VARCHAR(50)	NOT NULL UNIQUE,
    LOGICDELETE		BOOL	DEFAULT FALSE		NOT NULL
);

CREATE TABLE FACTURASXSUCURSALES(
		IDSUCURSAL 	INT	NOT NULL,
    IDFACTURA		INT NOT NULL,
  	NUMEROCONSECUTIVO	INT	NOT NULL,
    LOGICDELETE		BOOL	DEFAULT FALSE		NOT NULL,
  	PRIMARY KEY (IDSUCURSAL,IDFACTURA)
);

CREATE TABLE PERSONASXSUCURSALES(
		IDCEDULA			INT,
  	IDSUCURSAL		INT,
    LOGICDELETE		BOOL	DEFAULT FALSE		NOT NULL,
  	PRIMARY KEY (IDCEDULA,IDSUCURSAL)
);

CREATE TABLE PERSONAS(
		IDCEDULA 	INT		PRIMARY KEY	,
    NOMBRE		VARCHAR(50)	NOT NULL,
  	APELLIDO1	VARCHAR(50)	NOT NULL,
  	APELLIDO2	VARCHAR(50)	NOT NULL,
  	CONTRASENA	VARCHAR(50)	NOT NULL,
    TELEFONO	INT			NOT NULL,
    FECHANACIMIENTO	DATE		NOT NULL,
    LOGICDELETE		BOOL	DEFAULT FALSE		NOT NULL
);

CREATE TABLE ROLESXPERSONAS(
		IDCEDULA		INT,
  	IDROL			INT,
    LOGICDELETE		BOOL	DEFAULT FALSE		NOT NULL,
  	PRIMARY KEY (IDCEDULA,IDROL)
);

CREATE TABLE ROLES(
		IDROL		SERIAL	PRIMARY KEY,
  	NOMBRE		VARCHAR(50) UNIQUE,
    DESCRIPCION	VARCHAR(50),
    LOGICDELETE		BOOL	DEFAULT FALSE		NOT NULL
);

CREATE TABLE PROVEEDORES(
		IDPROVEEDOR SERIAL PRIMARY KEY,
  	NOMBRE VARCHAR(50) NOT NULL UNIQUE,
  	DESCRIPCION VARCHAR(50),
    LOGICDELETE		BOOL	DEFAULT FALSE		NOT NULL
);

CREATE TABLE PRODUCTOSXPROVEEDORES(
		IDPRODUCTO INT NOT NULL,
  	IDPROVEEDOR INT NOT NULL,
    PRECIO INT NOT NULL,
    LOGICDELETE		BOOL	DEFAULT FALSE		NOT NULL,
  	PRIMARY KEY (IDPRODUCTO,IDPROVEEDOR)
);

CREATE TABLE PRODUCTOS(
		IDPRODUCTO SERIAL PRIMARY KEY,
  	NOMBRE VARCHAR(50) NOT NULL UNIQUE,
  	DESCRIPCION VARCHAR(50),
    LOGICDELETE		BOOL	DEFAULT FALSE		NOT NULL
);

CREATE TABLE PRODUCTOSXFACTURAS(
		IDFACTURA INT NOT NULL,
  	IDPRODUCTO INT NOT NULL,
  	CANTIDAD INT,
    LOGICDELETE		BOOL	DEFAULT FALSE		NOT NULL,
		PRIMARY KEY (IDFACTURA,IDPRODUCTO)
);

CREATE TABLE FACTURAS(
		IDFACTURA SERIAL PRIMARY KEY,
  	FECHA DATE NOT NULL,
    LOGICDELETE		BOOL	DEFAULT FALSE		NOT NULL
);

CREATE TABLE FORMAPAGOSXFACTURAS(
		IDFACTURA INT NOT NULL,
  	IDFORMAPAGO INT NOT NULL,
    LOGICDELETE		BOOL	DEFAULT FALSE		NOT NULL,
		PRIMARY KEY (IDFACTURA,IDFORMAPAGO)
);

CREATE TABLE FORMAPAGOS(
		IDFORMAPAGO SERIAL PRIMARY KEY,
  	NOMBRE VARCHAR(50) NOT NULL UNIQUE,
    LOGICDELETE		BOOL	DEFAULT FALSE		NOT NULL
);

CREATE TABLE FACTURASXPERSONAS(
    IDFACTURA INT NOT NULL,
    IDCEDULA INT NOT NULL,
    LOGICDELETE	BIT			DEFAULT 0::BIT		NOT NULL,
    PRIMARY KEY (IDFACTURA,IDCEDULA)
);

CREATE TABLE FACTURASXCAJEROS(
    IDFACTURA INT NOT NULL,
    IDCEDULA INT NOT NULL,
    LOGICDELETE	BIT			DEFAULT 0::BIT		NOT NULL,
    PRIMARY KEY (IDFACTURA,IDCEDULA)
);

CREATE TABLE PRODUCTOSXSUCURSALES(
		IDPRODUCTO INT NOT NULL,
  	IDSUCURSAL INT NOT NULL,
  	PRECIO INT NOT NULL,
  	MINIMO INT NOT NULL,
  	PROMEDIO INT NOT NULL,
  	CANTIDADSUCURSAL INT NOT NULL,
    LOGICDELETE		BOOL	DEFAULT FALSE		NOT NULL,
  	PRIMARY KEY (IDPRODUCTO,IDSUCURSAL)
);

CREATE TABLE PROVINCIAS(
		IDPROVINCIA SERIAL PRIMARY KEY,
  	NOMBRE VARCHAR(50) UNIQUE
);

CREATE TABLE CANTONESXPROVINCIAS(
		IDCANTON INT NOT NULL,
    IDPROVINCIA INT NOT NULL,
		PRIMARY KEY (IDCANTON,IDPROVINCIA)
);

CREATE TABLE CANTONES(
		IDCANTON SERIAL PRIMARY KEY,
  	NOMBRE VARCHAR(50) UNIQUE
);

CREATE TABLE DISTRITOSXCANTONES(
		IDCANTON INT NOT NULL,
    IDDISTRITO INT NOT NULL,
		PRIMARY KEY (IDCANTON,IDDISTRITO)
);

CREATE TABLE DISTRITOS(
		IDDISTRITO SERIAL PRIMARY KEY,
  	NOMBRE VARCHAR(50) UNIQUE
);

CREATE TABLE PERSONASXDISTRITOS(
		IDCEDULA INT NOT NULL,
    IDDISTRITO INT NOT NULL,
  	DIRECCION VARCHAR(100)NOT NULL,
    LOGICDELETE		BOOL	DEFAULT FALSE		NOT NULL,
		PRIMARY KEY (IDCEDULA,IDDISTRITO)
);

CREATE TABLE SUCURSALESXDISTRITOS(
		IDSUCURSAL INT NOT NULL,
    IDDISTRITO INT NOT NULL,
  	DIRECCION VARCHAR(100)NOT NULL,
    LOGICDELETE		BOOL	DEFAULT FALSE		NOT NULL,
		PRIMARY KEY (IDSUCURSAL,IDDISTRITO)
);

CREATE TABLE CAJAS(
		IDCAJA SERIAL PRIMARY KEY,
  	FECHAINICIAL DATE NOT NULL,
  	FECHAFINAL DATE NOT NULL,
  	DINEROINICIAL INT NOT NULL,
  	DINEROFINAL INT NOT NULL,
    LOGICDELETE		BOOL	DEFAULT FALSE		NOT NULL
);

CREATE TABLE CAJASXPERSONAS(
		IDCEDULA INT NOT NULL,
  	IDCAJA INT NOT NULL,
    LOGICDELETE		BOOL	DEFAULT FALSE		NOT NULL,
		PRIMARY KEY (IDCEDULA,IDCAJA)
);

CREATE TABLE CAJASXSUCURSALES(
		IDSUCURSAL INT NOT NULL,
  	IDCAJA INT NOT NULL,
    LOGICDELETE		BOOL	DEFAULT FALSE		NOT NULL,
		PRIMARY KEY (IDSUCURSAL,IDCAJA)
);



ALTER TABLE CAJASXSUCURSALES ADD CONSTRAINT FKCAJASXSUCURSALESSUCURSALES
FOREIGN KEY (IDSUCURSAL) REFERENCES SUCURSALES(IDSUCURSAL);

ALTER TABLE CAJASXSUCURSALES ADD CONSTRAINT FKCAJASXSUCURSALESCAJAS
FOREIGN KEY (IDCAJA) REFERENCES CAJAS(IDCAJA);

ALTER TABLE CAJASXPERSONAS ADD CONSTRAINT FKCAJASXPERSONASPERSONAS
FOREIGN KEY (IDCEDULA) REFERENCES PERSONAS(IDCEDULA);

ALTER TABLE CAJASXPERSONAS ADD CONSTRAINT FKCAJASXPERSONASCAJAS
FOREIGN KEY (IDCAJA) REFERENCES CAJAS(IDCAJA);

ALTER TABLE PRODUCTOSXPROVEEDORES ADD CONSTRAINT FKPRODUCTOSXPROVEEDORESPRODUCTOS
FOREIGN KEY (IDPRODUCTO) REFERENCES PRODUCTOS(IDPRODUCTO);

ALTER TABLE PRODUCTOSXPROVEEDORES ADD CONSTRAINT FKPRODUCTOSXPROVEEDORESPROVEEDORES
FOREIGN KEY (IDPROVEEDOR) REFERENCES PROVEEDORES(IDPROVEEDOR);

ALTER TABLE PRODUCTOSXFACTURAS ADD CONSTRAINT FKPRODUCTOSXFACTURASFACTURAS
FOREIGN KEY (IDFACTURA) REFERENCES FACTURAS(IDFACTURA);

ALTER TABLE PRODUCTOSXFACTURAS ADD CONSTRAINT FKPRODUCTOSXFACTURASPRODUCTOS
FOREIGN KEY (IDPRODUCTO) REFERENCES PRODUCTOS(IDPRODUCTO);

ALTER TABLE FORMAPAGOSXFACTURAS ADD CONSTRAINT FKFORMAPAGOSXFACTURASFACTURAS
FOREIGN KEY (IDFACTURA) REFERENCES FACTURAS(IDFACTURA);

ALTER TABLE FORMAPAGOSXFACTURAS ADD CONSTRAINT FKFORMAPAGOSXFACTURASFORMAPAGOS
FOREIGN KEY (IDFORMAPAGO) REFERENCES FORMAPAGOS(IDFORMAPAGO);

ALTER TABLE PRODUCTOSXSUCURSALES ADD CONSTRAINT FKPRODUCTOSXSUCURSALESPRODUCTOS
FOREIGN KEY (IDPRODUCTO) REFERENCES PRODUCTOS(IDPRODUCTO);

ALTER TABLE PRODUCTOSXSUCURSALES ADD CONSTRAINT FKPRODUCTOSXSUCURSALESSUCURSALES
FOREIGN KEY (IDSUCURSAL) REFERENCES SUCURSALES(IDSUCURSAL);

ALTER TABLE SUCURSALESXCOMPANIAS ADD CONSTRAINT FKSUCURSALESXCOMPANIASCOMPANIAS
FOREIGN KEY (IDCOMPANIA) REFERENCES COMPANIAS(IDCOMPANIA);

ALTER TABLE SUCURSALESXCOMPANIAS ADD CONSTRAINT FKSUCURSALESXCOMPANIASSUCURSALES
FOREIGN KEY (IDSUCURSAL) REFERENCES SUCURSALES(IDSUCURSAL);

ALTER TABLE FACTURASXSUCURSALES ADD CONSTRAINT FKFACTURASXSUCURSALESFACTURAS
FOREIGN KEY (IDFACTURA) REFERENCES FACTURAS(IDFACTURA);

ALTER TABLE FACTURASXSUCURSALES ADD CONSTRAINT FKFACTURASXSUCURSALESSUCURSALES
FOREIGN KEY (IDSUCURSAL) REFERENCES SUCURSALES(IDSUCURSAL);

ALTER TABLE PERSONASXSUCURSALES ADD CONSTRAINT FKPERSONASXSUCURSALESPERSONAS
FOREIGN KEY (IDCEDULA) REFERENCES PERSONAS(IDCEDULA);

ALTER TABLE PERSONASXSUCURSALES ADD CONSTRAINT FKPERSONASXSUCURSALESSUCURSALES
FOREIGN KEY (IDSUCURSAL) REFERENCES SUCURSALES(IDSUCURSAL);

ALTER TABLE ROLESXPERSONAS ADD CONSTRAINT FKROLESXPERSONASROLES
FOREIGN KEY (IDROL) REFERENCES ROLES(IDROL);

ALTER TABLE ROLESXPERSONAS ADD CONSTRAINT FKROLESXPERSONASPERSONAS
FOREIGN KEY (IDCEDULA) REFERENCES PERSONAS(IDCEDULA);

ALTER TABLE FACTURASXPERSONAS ADD CONSTRAINT FKFACTURASXPERSONASFACTURAS
FOREIGN KEY (IDFACTURA) REFERENCES FACTURAS(IDFACTURA);

ALTER TABLE FACTURASXPERSONAS ADD CONSTRAINT FKFACTURASXPERSONASPERSONAS
FOREIGN KEY (IDCEDULA) REFERENCES PERSONAS(IDCEDULA);

ALTER TABLE CANTONESXPROVINCIAS ADD CONSTRAINT FKCANTONESXPROVINCIASPROVINCIAS
FOREIGN KEY (IDPROVINCIA) REFERENCES PROVINCIAS(IDPROVINCIA);

ALTER TABLE CANTONESXPROVINCIAS ADD CONSTRAINT FKCANTONESXPROVINCIASCANTONES
FOREIGN KEY (IDCANTON) REFERENCES CANTONES(IDCANTON);

ALTER TABLE DISTRITOSXCANTONES ADD CONSTRAINT FKDISTRITOSXCANTONESDISTRITOS
FOREIGN KEY (IDDISTRITO) REFERENCES DISTRITOS(IDDISTRITO);

ALTER TABLE DISTRITOSXCANTONES ADD CONSTRAINT FKDISTRITOSXCANTONESCANTONES
FOREIGN KEY (IDCANTON) REFERENCES CANTONES(IDCANTON);

ALTER TABLE PERSONASXDISTRITOS ADD CONSTRAINT FKPERSONASXDISTRITOSPERSONAS
FOREIGN KEY (IDCEDULA) REFERENCES PERSONAS(IDCEDULA);

ALTER TABLE PERSONASXDISTRITOS ADD CONSTRAINT FKPERSONASXDISTRITOSDISTRITOS
FOREIGN KEY (IDDISTRITO) REFERENCES DISTRITOS(IDDISTRITO);

ALTER TABLE SUCURSALESXDISTRITOS ADD CONSTRAINT FKSUCURSALESXDISTRITOSDISTRITOS
FOREIGN KEY (IDDISTRITO) REFERENCES DISTRITOS(IDDISTRITO);

ALTER TABLE SUCURSALESXDISTRITOS ADD CONSTRAINT FKSUCURSALESXDISTRITOSSUCURSALES
FOREIGN KEY (IDSUCURSAL) REFERENCES SUCURSALES(IDSUCURSAL);



